{% extends './template.html' %}

{% block content %}

<section class="container">
  <h2 class= "about">
    <div class="std-icon icon-{{context.record_type.toLowerCase()}}"></div>
    About <strong>{{context.context_display}}</strong>
    <div class="filters pull-right"><a href="#" id="toggle-filters">Filters</a></div>
  </h2>

  <form id="filters-container" action="" method="get">
    <div class="row">
      <div class="col-sm-4">
        <label for="document-type">Source</label>
        <select class="form-control" id="provider" name="provider">
          {% for provider in documents.providers %}
          <option value="{{loop.key}}">{{provider.name}}</option>
          {% endfor %}
        </select>
      </div>
      <div class="col-sm-4">
        <label for="document-type">Type</label>
        <select class="form-control" id="document-type" name="document-type">
          {% for docType in documents.document_types %}
          <option value="{{value.id}}">{{docType.name}}</option>
          {% endfor %}
        </select>
      </div>
      <div class="col-sm-4">
        <label for="query">Query</label>
        <input type="text" class="form-control" id="query" name="query">
      </div>
    </div>
    <input type="hidden" name="context" value="{{ query.context }}" />
    <input type="submit" class="btn btn-default" value="Submit Query" />
    </div>
  </form>

  <hr/>

  <div class="row">
    {% for doc in documents.datas %}
      <div data-document-url="/app/documents/{{doc.id}}" class="col-xs-12 panel panel-default snippet-container">
        <div class="panel-heading">
          {{doc.document_type|capitalize}} - {{doc.provider|capitalize}}
          <div class="bookmark pull-right"></div>
        </div>
        <div class="panel-body">
          {% autoescape false %}{{doc.snippet_rendered}}{% endautoescape %}
        </div>
      </div>
    {% endfor %}
  </div>
</section>
{% endblock %}
